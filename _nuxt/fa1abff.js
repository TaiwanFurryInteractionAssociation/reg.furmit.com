(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{489:function(t,e,n){"use strict";n.r(e);var o=n(3),r=(n(22),n(11),n(67),n(15),n(52),n(71)),c=(n(137),{data:function(){return{loading:!1,data:null,showNotification:!1}},mounted:function(){this.loading=!0,this.$store.commit("app/setTitle",this.$t("index.buttons.minorities")),this.getStatus()},methods:{toggleNotification:function(){this.showNotification=!this.showNotification},getStatus:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/furmit/minorities/status").then((function(e){if(e.data.startTime){var dt=new Date(1e3*e.data.startTime);e.data.startTime=dt.toLocaleString()}if(e.data.endTime){var n=new Date(1e3*e.data.endTime);e.data.endTime=n.toLocaleString()}t.data={winner:e.data.winner,status:e.data.status,question:e.data.question,endTime:e.data.endTime,startTime:e.data.startTime,survivors:e.data.survivors},console.log(t.data)})).catch((function(t){r.a.showRequestError(t)})).finally((function(){setTimeout((function(){t.getStatus()}),5e3)}));case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},vote:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm(e.$t("minorities.texts.areYouSureToSubmit").replace("{option}",e.$t("minorities.options."+(t?"yes":"no"))))){n.next=2;break}return n.abrupt("return");case 2:return e.loading=!0,n.next=5,e.$axios.post("/api/furmit/minorities",{answer:t}).then((function(t){e.getStatus()})).catch((function(t){r.a.showRequestError(t)}));case 5:e.loading=!1;case 6:case"end":return n.stop()}}),n)})))()}}}),l=n(20),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("Loading",{attrs:{value:t.loading}}),t._v(" "),t.data?e("div",{staticClass:"text:center"},[t.data.question?e("div",[e("div",{staticClass:"text:32 mt:32 font:bold"},[t._v("\n        "+t._s(t.$t("minorities.questions.".concat(t.data.question)))+"\n      ")]),t._v(" "),t.data.survivors?e("div",{staticClass:"text:24 mt:32 font:bold"},[t._v("\n             ( "+t._s(t.$t("minorities.texts.survivors"))+" → "+t._s(t.data.survivors)+" )\n           ")]):t._e(),t._v(" "),"voteNow"==t.data.status||"vote"==t.data.status?e("div",[e("div",{staticClass:"text:24 mt:32 mb:32"},[t._v("\n          "+t._s(t.$t("minorities.texts.chooseYourSide"))+"\n        ")]),t._v(" "),e("div",{staticClass:"flex flex:col@<sm jc:center ai:center"},[e("div",{staticClass:"bg:white text:36 m:32 w:200 h:200 {w:100%;h:90;mb:8;mt:8}@<sm border:#CECECE|1px|solid cursor:pointer round drop-shadow flex jc:center ai:center",on:{click:function(e){return t.vote(!0)}}},[t._v("\n            "+t._s(t.$t("minorities.options.yes"))+"\n          ")]),t._v(" "),e("div",{staticClass:"bg:white text:36 m:32 w:200 h:200 {w:100%;h:90;mb:8;mt:8}@<sm border:#CECECE|1px|solid cursor:pointer round drop-shadow flex jc:center ai:center",on:{click:function(e){return t.vote(!1)}}},[t._v("\n            "+t._s(t.$t("minorities.options.no"))+"\n          ")])]),t._v(" "),t.data.startTime?e("div",{staticClass:"text:24 mt:32 mb:32 flex flex:col@<sm jc:center ai:center"},[e("div",{staticClass:"mb:16px@<sm"},[t._v("\n            "+t._s(t.$t("minorities.texts.timeRange"))+"\n          ")]),t._v(" "),e("div",[t._v(t._s(t.data.startTime))]),t._v(" "),e("div",[t._v(" "+t._s(t.$t("minorities.texts.timeThru"))+" ")]),t._v(" "),e("div",[t._v(t._s(t.data.endTime))])]):t._e()]):e("div",{staticClass:"round drop-shadow p:16|48 p:16|24@<xs mt:32 mb:16 bg:white text:24"},[t._v("\n        "+t._s(t.$t("minorities.status.".concat(t.data.status)))+"\n      ")])]):t.data.winner?e("div",{staticClass:"round drop-shadow p:16|48 p:16|24@<xs mb:16 bg:white"},[e("div",{staticClass:"text:24 mb:16"},[t._v(t._s(t.$t("minorities.status.isWinner")))]),t._v(" "),e("div",[t._v(t._s(t.$t("minorities.status.isWinnerNotice")))])]):"ended"==t.data.status?e("div",{staticClass:"round drop-shadow p:16|48 p:16|24@<xs mb:16 bg:white text:24"},[t._v("\n      "+t._s(t.$t("minorities.status.".concat(t.data.status)))+"\n      "),e("hr",{staticClass:"mt:16 mb:16"}),t._v(" "),e("div",[t._v(t._s(t.$t("minorities.status.out")))])]):e("div",{staticClass:"round drop-shadow p:16|48 p:16|24@<xs mb:16 bg:white text:24"},[t._v("\n      "+t._s(t.$t("minorities.status.".concat(t.data.status)))+"\n      "),"out"!=t.data.status&&t.data.startTime?e("div",{staticClass:"text:20"},[e("hr",{staticClass:"mt:16 mb:16"}),t._v("\n        "+t._s(t.$t("minorities.texts.estimatedStartTime"))+" "+t._s(t.data.startTime)+"\n      ")]):t._e()]),t._v(" "),t.showNotification?e("div",{staticClass:"round drop-shadow p:16|48 p:16|24@<xs mb:16 bg:white text:24",on:{click:function(e){return t.toggleNotification()}}},[e("div",[t._v(t._s(t.$t("minorities.rules.title")))]),t._v(" "),t.showNotification?e("div",{staticClass:"text:left text:20"},[e("hr",{staticClass:"mt:16 mb:16"}),t._v(" "),e("h4",[t._v(t._s(t.$t("minorities.rules.time.title")))]),t._v("\n        "+t._s(t.$t("minorities.rules.time.content"))+"\n        "),e("h4",[t._v(t._s(t.$t("minorities.rules.howToPlay.title")))]),t._v("\n        "+t._s(t.$t("minorities.rules.howToPlay.content"))+"\n        "),e("h4",[t._v(t._s(t.$t("minorities.rules.specialRules.title")))]),t._v(" "),e("ol",[e("li",[t._v(t._s(t.$t("minorities.rules.specialRules.contents[0]")))]),t._v(" "),e("li",[t._v(t._s(t.$t("minorities.rules.specialRules.contents[1]")))])]),t._v(" "),e("hr"),t._v(" "),e("h4",[t._v(t._s(t.$t("minorities.rules.examples.title")))]),t._v(" "),e("ol",{staticClass:"text:16"},[e("li",[e("h4",[t._v(t._s(t.$t("minorities.rules.examples.contents[0].title")))]),t._v("\n            "+t._s(t.$t("minorities.rules.examples.contents[0].content"))+"\n          ")]),t._v(" "),e("li",[e("h4",[t._v(t._s(t.$t("minorities.rules.examples.contents[1].title")))]),t._v("\n            "+t._s(t.$t("minorities.rules.examples.contents[1].content"))+"\n          ")]),t._v(" "),e("li",[e("h4",[t._v(t._s(t.$t("minorities.rules.examples.contents[1].title")))]),t._v("\n            "+t._s(t.$t("minorities.rules.examples.contents[1].content"))+"\n          ")])])]):t._e()]):e("div",{staticClass:"p:16|48 p:16|24@<xs mb:16 text:24 text:underline",on:{click:function(e){return t.toggleNotification()}}},[e("div",{staticClass:"text:16"},[t._v(t._s(t.$t("minorities.rules.toggleTitle")))])])]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Loading:n(171).default})}}]);