(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{486:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(22),n(15),n(52),n(41),n(46),n(45),n(51),n(11),n(67),n(137)),c=n.n(o),l=n(72),d=n.n(l),m=(n(71),{name:"IndexPage",data:function(){var t=d.a.getRegistrationOpenDatetimeRange(),e=d.a.getHotelReservationOpenDatetimeRange(),n=d.a.getAfterPartyRegistrationOpenDatetimeRange(),menu=this.isOnSite("activity")?[{key:"points",icon:"hand-coin",path:"/points",enabled:!0,title:this.$t("index.buttons.points")},{key:"leaderboard",icon:"format-list-numbered",path:"/leaderboard",enabled:!0,title:this.$t("index.buttons.leaderboard")},{key:"furstarsVote",icon:"cards-playing-heart",path:"/furstars/vote",enabled:!0,title:this.$t("index.buttons.furstarsVote")},{key:"minorities",icon:"head-question",path:"/minorities",enabled:!0,title:this.$t("index.buttons.minorities"),subtitle:this.$t("minorities.status.loading")},{key:"raffleTickets",icon:"ticket",path:"/raffleTickets",enabled:!0,title:this.$t("index.buttons.raffleTickets")}]:[];return this.isOnSite("register")&&d.a.isRegistrationEnabled()&&menu.push({key:"registration",icon:"calendar-edit",path:"/registration",enabled:d.a.isRegistrationCanBeEnter(),title:this.$t("index.buttons.registration"),subtitle:this.$t("index.buttons.registrationNotice").replace("{START}",t.start_at.toLocaleString()).replace("{END}",t.end_at.toLocaleString())}),this.isOnSite("register")&&d.a.isHotelReservationEnabled()&&menu.push({key:"hotelReservation",icon:"bed",path:"/hotelReservation",enabled:d.a.isHotelReservationCanBeEnter(),title:this.$t("index.buttons.hotelReservation"),subtitle:this.$t("index.buttons.hotelReservationNotice").replace("{START}",e.start_at.toLocaleString()).replace("{END}",e.end_at.toLocaleString())}),this.isOnSite("register")&&d.a.isAfterPartyRegistrationEnabled()&&menu.push({key:"afterPartyRegistration",icon:"glass-wine",path:"/afterPartyRegistration",enabled:d.a.isAfterPartyRegistrationCanBeEnter(),title:this.$t("index.buttons.afterPartyRegistration"),subtitle:this.$t("index.buttons.afterPartyRegistrationNotice").replace("{START}",n.start_at.toLocaleString()).replace("{END}",n.end_at.toLocaleString())}),menu.push({key:"accountManage",icon:"account",path:"/accountManage",enabled:!0,title:this.$t("index.buttons.accountManage"),subtitle:""}),{COLORS:c.a,hasRegistrationToken:null!==localStorage.getItem("tfia/registrationToken")&&new Date(JSON.parse(localStorage.getItem("tfia/registrationToken")).expired_at).getTime()>(new Date).getTime(),menu:menu}},mounted:function(){this.$store.commit("app/setTitle",null),this.isOnSite("activity")&&(this.getPointsStatus(),this.getMinoritiesStatus())},methods:{redirectToSpecialRegistration:function(){this.$router.push(this.localePath("/registration/form?registrationToken="+JSON.parse(localStorage.getItem("tfia/registrationToken")).registrationToken))},isOnSite:function(t){return window.location.origin.includes({activity:"activity.furmit.com",register:"reg.furmit.com"}[t])||false},getPointsStatus:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/points/status").then((function(e){if(e.data.points){var n,r={points:e.data.points,lastHistory:e.data.lastHistory};if(r.lastHistory){var o=r.lastHistory.points>0?"+".concat(r.lastHistory.points):r.lastHistory.points;if(r.lastHistory.code){var c="";switch(r.lastHistory.type){case"casino":c=t.$t("mitCasinoGames.names.".concat(r.lastHistory.code));break;case"furstars":case"minorities":c=t.$t("mitEvents.".concat(r.lastHistory.code));break;default:c=r.lastHistory.code}o+="（".concat(c,"）")}n=t.$t("index.buttons.pointsNotice").replace("{INFO}",o)}t.menu.map((function(e){"points"==e.key&&(e.title="".concat(r.points," ").concat(t.$t("index.buttons.points")),n&&(e.subtitle=n))})),t.menu=t.menu}})).catch((function(t){}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},getMinoritiesStatus:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,t.$axios.get("/api/furmit/minorities/status").then((function(e){t.menu.map((function(n){if("minorities"==n.key){if(n.subtitle=t.$t("minorities.status."+e.data.status),e.data.endTime)switch(e.data.status){case"voteNow":n.subtitle+=" ("+t.$t("minorities.texts.timeLeft").replace("{minutes}",parseInt((1e3*e.data.endTime-Date.now())/6e4))+")";break;case"voted":n.subtitle+=" ("+t.$t("minorities.texts.timeToNextStage").replace("{minutes}",parseInt((1e3*e.data.endTime-Date.now())/6e4))+")"}if(e.data.startTime&&"notStarted"===e.data.status)n.subtitle+=" ("+t.$t("minorities.texts.timeUntil").replace("{minutes}",parseInt((1e3*e.data.startTime-Date.now())/6e4))+")"}})),t.menu=t.menu})).catch((function(t){})).finally((function(){setTimeout((function(){n.getMinoritiesStatus()}),5e3)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()}}}),f=n(20),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"display:grid grid-template-columns:1fr|1fr|1fr@>sm grid-template-columns:1fr@<=sm gap:16"},[t.hasRegistrationToken?e("div",{staticClass:"round border drop-shadow flex justify-content:space-between p:32|32 mb:16 grid-column-start:1 grid-column-end:4@>sm font-size:1.4rem transition:0.5s transform:translateY(-2px):hover cursor:pointer",style:{background:t.COLORS.primary.background,color:t.COLORS.primary.color},on:{click:t.redirectToSpecialRegistration}},[t._v("\n    "+t._s(t.$t("index.buttons.registerWithRegistrationToken"))+"\n    "),e("div",{staticClass:"mdi mdi-arrow-right"})]):t._e(),t._v(" "),t._l(t.menu,(function(n){return e("nuxt-link",{key:n.key,staticClass:"border:#CECECE|1px|solid border-radius:16 py:48 flex justify-content:center flex-direction:column align-items:center bg:white cursor:pointer",attrs:{to:n.enabled?t.localePath(n.path):"/",event:n.enabled?"click":""}},[e("span",{class:"mdi mdi-"+n.icon+" font-size:4rem"}),t._v(" "),e("span",{staticClass:"font-size:1.2rem mt:4 font-weight:bold px:16"},[t._v(t._s(n.title))]),t._v(" "),e("span",{staticClass:"font-size:0.8rem mt:4 font-weight:bold pt:8 px:16 text:center"},[t._v(t._s(n.subtitle))])])}))],2)}),[],!1,null,null,null);e.default=component.exports}}]);